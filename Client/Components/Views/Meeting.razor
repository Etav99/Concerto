@using System.Web
@inject IJSRuntime JsRuntime

<MudPaper id="jitsi" Class="flex-grow-1 pa-2" Height="100%" MaxHeight="100%" Elevation="0" Outlined="true"/>

@code {

	[Parameter]
	public string? MeetingName { get; set; }

	[Parameter]
	public Guid? Guid { get; set; }

	protected override async Task OnAfterRenderAsync(bool firstRender)
	{
		if (firstRender && MeetingName != null && Guid != null)
		{
			var guid = Guid.ToString()!.Replace("-", string.Empty);
			var name = HttpUtility.UrlPathEncode($"Concerto/{guid}");
			await JsRuntime.InvokeAsync<string>("startMeeting", "jitsi", name);
		}
	}

}