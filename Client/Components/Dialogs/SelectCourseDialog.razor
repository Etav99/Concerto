@using Concerto.Client.Components.Lists
@using Concerto.Client.Services
@inject IDialogService DialogService
@inject ISnackbar Snackbar
@inject HttpClient Http

<MudDialog Style="">
	<DialogContent>
		<MudStack Spacing="4" Style="height: 70vh;">
			<CoursesList OnCourseSelected="SelectCourse" ManagementEnabled="false" WithoutCourseIds="WithoutCourseIds" />
		</MudStack>

	</DialogContent>

	<DialogActions>
		<MudButton Variant="Variant.Filled" Color="Color.Error" OnClick="Cancel">Cancel</MudButton>
	</DialogActions>

</MudDialog>
@code {
	[CascadingParameter] MudDialogInstance Dialog { get; set; } = null!;

	[Parameter]
	public IEnumerable<long> WithoutCourseIds { get; set; } = Enumerable.Empty<long>();

	void Cancel() => Dialog.Cancel();

	protected override void OnInitialized()
	{
		Dialog.Options.FullWidth = true;
		Dialog.Options.MaxWidth = MaxWidth.Large;
		Dialog.SetOptions(Dialog.Options);
	}

	private void SelectCourse(long courseId)
	{
		Dialog.Close(DialogResult.Ok(courseId));
	}
}